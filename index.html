<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <meta name="theme-color" content="#F9F9F8">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  <title>FRANKIE â€” Dee's Mission Control</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      /* KITH / Fear of God - Ultra Muted Palette */
      --bg-primary: #FAFAF9;
      --bg-secondary: #FFFFFF;
      --bg-hover: #F5F5F4;
      --bg-tertiary: #F0EFEE;
      --border: #E8E8E6;
      --border-light: #F0F0EE;
      
      /* Muted Accents - Refined */
      --accent-sage: #B8C9B1;
      --accent-taupe: #C5C0B8;
      --accent-lavender: #B8B4C4;
      --accent-rose: #D1C2C2;
      --accent-sand: #CFC9C2;
      --accent-fog: #C5C5C5;
      --accent-cream: #F5F3EF;
      
      /* Text */
      --text-primary: #1A1A1A;
      --text-secondary: #5C5C5C;
      --text-muted: #8A8A8A;
      --text-faint: #B5B5B5;
      
      /* Status */
      --status-online: #4ADE80;
      --status-online-bg: #DCFCE7;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.05);
      --shadow-lg: 0 12px 40px rgba(0,0,0,0.08);
      
      /* Transitions */
      --transition-fast: 0.15s ease;
      --transition-medium: 0.25s ease;
      --transition-slow: 0.4s ease;
      
      /* Spacing */
      --space-xs: 4px;
      --space-sm: 8px;
      --space-md: 16px;
      --space-lg: 24px;
      --space-xl: 32px;
      --space-2xl: 48px;
    }

    /* Dark Mode */
    [data-theme="dark"] {
      --bg-primary: #141414;
      --bg-secondary: #1C1C1C;
      --bg-hover: #242424;
      --bg-tertiary: #2A2A2A;
      --border: #333333;
      --border-light: #292929;
      --text-primary: #F5F5F5;
      --text-secondary: #A0A0A0;
      --text-muted: #707070;
      --text-faint: #505050;
      --accent-cream: #252520;
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.2);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.3);
      --shadow-lg: 0 12px 40px rgba(0,0,0,0.4);
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    html {
      font-size: 14px;
      scroll-behavior: smooth;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      min-height: 100vh;
      min-height: 100dvh;
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      overflow-x: hidden;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       PASSWORD MODAL - Luxury Styled
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .auth-overlay {
      position: fixed;
      inset: 0;
      background: var(--bg-primary);
      z-index: 9999;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 1;
      transition: opacity 0.5s ease;
    }

    .auth-overlay.hidden {
      opacity: 0;
      pointer-events: none;
    }

    .auth-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      padding: var(--space-2xl);
      width: 100%;
      max-width: 360px;
      text-align: center;
      box-shadow: var(--shadow-lg);
    }

    .auth-logo {
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.4em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: var(--space-lg);
    }

    .auth-avatar {
      width: 80px;
      height: 80px;
      border-radius: 50%;
      object-fit: cover;
      object-position: center 15%;
      margin-bottom: var(--space-lg);
      border: 3px solid var(--border-light);
    }

    .auth-title {
      font-size: 16px;
      font-weight: 500;
      margin-bottom: var(--space-xs);
    }

    .auth-subtitle {
      font-size: 12px;
      color: var(--text-muted);
      margin-bottom: var(--space-lg);
    }

    .auth-input-wrapper {
      position: relative;
      margin-bottom: var(--space-md);
    }

    .auth-input {
      width: 100%;
      padding: 14px 16px;
      font-size: 14px;
      font-family: inherit;
      border: 1px solid var(--border);
      background: var(--bg-primary);
      color: var(--text-primary);
      text-align: center;
      letter-spacing: 0.3em;
      transition: all var(--transition-fast);
    }

    .auth-input:focus {
      outline: none;
      border-color: var(--text-muted);
      background: var(--bg-secondary);
    }

    .auth-input.error {
      border-color: #E57373;
      animation: shake 0.4s ease;
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      25% { transform: translateX(-8px); }
      75% { transform: translateX(8px); }
    }

    .auth-btn {
      width: 100%;
      padding: 14px;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      background: var(--text-primary);
      color: var(--bg-secondary);
      border: none;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .auth-btn:hover {
      opacity: 0.9;
      transform: translateY(-1px);
    }

    .auth-btn:active {
      transform: translateY(0);
    }

    .auth-error {
      font-size: 11px;
      color: #E57373;
      margin-top: var(--space-md);
      min-height: 16px;
    }

    .auth-hint {
      font-size: 10px;
      color: var(--text-faint);
      margin-top: var(--space-lg);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       HEADER
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .header {
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: 0 var(--space-xl);
      height: 56px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      position: sticky;
      top: 0;
      z-index: 100;
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
    }

    .logo {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.35em;
      text-transform: uppercase;
      color: var(--text-primary);
    }

    .header-nav {
      display: flex;
      align-items: center;
      gap: var(--space-xl);
    }

    .nav-link {
      font-size: 10px;
      font-weight: 500;
      letter-spacing: 0.12em;
      text-transform: uppercase;
      color: var(--text-muted);
      text-decoration: none;
      transition: color var(--transition-fast);
      padding: var(--space-xs) 0;
      position: relative;
    }

    .nav-link::after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 0;
      height: 1px;
      background: var(--text-primary);
      transition: width var(--transition-medium);
    }

    .nav-link:hover::after,
    .nav-link.active::after {
      width: 100%;
    }

    .nav-link:hover,
    .nav-link.active {
      color: var(--text-primary);
    }

    .header-actions {
      display: flex;
      align-items: center;
      gap: var(--space-md);
    }

    .theme-toggle {
      width: 32px;
      height: 32px;
      border: 1px solid var(--border);
      background: var(--bg-primary);
      border-radius: 50%;
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 14px;
      transition: all var(--transition-fast);
    }

    .theme-toggle:hover {
      border-color: var(--text-muted);
      transform: scale(1.05);
    }

    .sync-badge {
      font-size: 9px;
      letter-spacing: 0.08em;
      color: var(--text-faint);
      padding: var(--space-xs) var(--space-sm);
      background: var(--bg-primary);
      border-radius: 2px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LAYOUT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .layout {
      display: grid;
      grid-template-columns: 240px 1fr 280px;
      min-height: calc(100vh - 56px);
      min-height: calc(100dvh - 56px);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LEFT SIDEBAR - Agent Status
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sidebar-left {
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      padding: var(--space-xl) var(--space-lg);
      display: flex;
      flex-direction: column;
      overflow-y: auto;
    }

    .agent-card {
      text-align: center;
      padding-bottom: var(--space-lg);
      border-bottom: 1px solid var(--border-light);
      margin-bottom: var(--space-lg);
    }

    .avatar-wrapper {
      position: relative;
      width: 100px;
      height: 100px;
      margin: 0 auto var(--space-md);
    }

    .avatar-ring {
      position: absolute;
      inset: -5px;
      border-radius: 50%;
      border: 2px solid var(--status-online);
      opacity: 0.5;
      animation: gentle-pulse 3s ease-in-out infinite;
    }

    @keyframes gentle-pulse {
      0%, 100% { opacity: 0.3; transform: scale(1); }
      50% { opacity: 0.7; transform: scale(1.03); }
    }

    .avatar {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      object-position: center 15%;
      display: block;
      transform: scale(1.15);
    }

    .status-dot {
      position: absolute;
      bottom: 6px;
      right: 6px;
      width: 16px;
      height: 16px;
      background: var(--status-online);
      border-radius: 50%;
      border: 3px solid var(--bg-secondary);
      z-index: 2;
    }

    .agent-name {
      font-size: 11px;
      font-weight: 600;
      letter-spacing: 0.2em;
      text-transform: uppercase;
      margin-bottom: var(--space-xs);
    }

    .agent-role {
      font-size: 11px;
      color: var(--text-muted);
      letter-spacing: 0.02em;
    }

    .agent-status-live {
      margin-top: var(--space-md);
      padding: 10px 14px;
      background: var(--status-online-bg);
      border: 1px solid #BBF7D0;
      border-radius: 6px;
      font-size: 10px;
      color: #166534;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: var(--space-sm);
    }

    [data-theme="dark"] .agent-status-live {
      background: rgba(74, 222, 128, 0.1);
      border-color: rgba(74, 222, 128, 0.2);
      color: #4ADE80;
    }

    .status-dot-live {
      width: 6px;
      height: 6px;
      background: #22C55E;
      border-radius: 50%;
      animation: pulse-dot 1.5s ease-in-out infinite;
    }

    @keyframes pulse-dot {
      0%, 100% { opacity: 1; transform: scale(1); }
      50% { opacity: 0.6; transform: scale(1.3); }
    }

    .sidebar-section {
      margin-bottom: var(--space-lg);
    }

    .section-label {
      font-size: 9px;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
      color: var(--text-faint);
      margin-bottom: var(--space-sm);
      display: flex;
      align-items: center;
      gap: var(--space-sm);
    }

    /* Collapsible sections */
    .collapsible-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      cursor: pointer;
      user-select: none;
      padding: var(--space-xs) 0;
      transition: color var(--transition-fast);
    }

    .collapsible-header:hover {
      color: var(--text-secondary);
    }

    .collapse-arrow {
      font-size: 8px;
      transition: transform var(--transition-fast);
      color: var(--text-faint);
    }

    .collapsible-content {
      max-height: 600px;
      overflow: hidden;
      transition: max-height var(--transition-medium), opacity var(--transition-fast);
      opacity: 1;
    }

    .collapsible-content.collapsed {
      max-height: 0;
      opacity: 0;
    }

    .collapse-arrow.collapsed {
      transform: rotate(-90deg);
    }

    /* Calendar Section */
    .calendar-section {
      flex: 1;
      display: flex;
      flex-direction: column;
      min-height: 0;
    }

    .calendar-timeline {
      display: flex;
      flex-direction: column;
      gap: 3px;
      max-height: 260px;
      overflow-y: auto;
      padding-right: var(--space-xs);
      margin-top: var(--space-sm);
    }

    .cal-event {
      display: flex;
      align-items: flex-start;
      gap: var(--space-sm);
      padding: 8px 10px;
      border-radius: 6px;
      background: var(--bg-primary);
      border-left: 3px solid var(--accent-sage);
      transition: all var(--transition-fast);
      cursor: pointer;
      text-decoration: none;
      color: inherit;
    }

    .cal-event:hover {
      transform: translateX(3px);
      box-shadow: var(--shadow-sm);
    }

    .cal-event.all-day {
      background: linear-gradient(135deg, var(--accent-cream), var(--bg-primary));
      border-left-width: 4px;
    }

    .cal-event-time {
      font-size: 9px;
      font-weight: 500;
      color: var(--text-muted);
      min-width: 42px;
      flex-shrink: 0;
    }

    .cal-event-time.all-day {
      font-size: 8px;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    .cal-event-content {
      flex: 1;
      min-width: 0;
    }

    .cal-event-title {
      font-size: 11px;
      font-weight: 500;
      line-height: 1.3;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .cal-event-location {
      font-size: 9px;
      color: var(--text-muted);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      margin-top: 2px;
    }

    /* Calendar colors */
    .cal-event.cal-md-personal { border-left-color: #92e1c0; }
    .cal-event.cal-md-content { border-left-color: #9fe1e7; }
    .cal-event.cal-dee-personal { border-left-color: var(--accent-lavender); }

    .calendar-upcoming-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 9px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-faint);
      margin-top: var(--space-md);
      padding: var(--space-sm) 0;
      border-bottom: 1px solid var(--border-light);
      cursor: pointer;
    }

    .calendar-upcoming {
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      margin-top: var(--space-sm);
      max-height: 180px;
      overflow-y: auto;
    }

    .cal-day-group {
      margin-bottom: var(--space-sm);
    }

    .cal-day-header {
      font-size: 9px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: var(--space-xs);
      padding: var(--space-xs) 0;
      border-bottom: 1px solid var(--border-light);
    }

    .cal-day-header.is-tomorrow {
      color: var(--accent-lavender);
    }

    .calendar-sync-info {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      font-size: 8px;
      color: var(--text-faint);
      margin-top: var(--space-md);
      padding-top: var(--space-sm);
      border-top: 1px solid var(--border-light);
    }

    .sync-dot {
      width: 5px;
      height: 5px;
      border-radius: 50%;
      background: var(--status-online);
    }

    .cal-empty {
      font-size: 11px;
      color: var(--text-muted);
      text-align: center;
      padding: var(--space-md);
      font-style: italic;
    }

    .calendar-loading {
      font-size: 10px;
      color: var(--text-muted);
      text-align: center;
      padding: var(--space-md);
    }

    /* Goals */
    .goal-item {
      margin-bottom: var(--space-md);
    }

    .goal-header {
      display: flex;
      justify-content: space-between;
      font-size: 10px;
      color: var(--text-secondary);
      margin-bottom: var(--space-xs);
    }

    .goal-percent {
      color: var(--text-muted);
      font-weight: 500;
    }

    .goal-bar {
      height: 4px;
      background: var(--border);
      border-radius: 2px;
      overflow: hidden;
    }

    .goal-fill {
      height: 100%;
      background: var(--accent-sage);
      border-radius: 2px;
      transition: width 0.8s ease;
    }

    .sidebar-footer {
      margin-top: auto;
      padding-top: var(--space-lg);
      font-size: 9px;
      color: var(--text-faint);
      letter-spacing: 0.03em;
      border-top: 1px solid var(--border-light);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN CONTENT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .main {
      padding: var(--space-xl);
      overflow-x: auto;
      background: var(--bg-primary);
    }

    /* Welcome */
    .welcome {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      padding: var(--space-lg) var(--space-xl);
      margin-bottom: var(--space-lg);
      display: flex;
      justify-content: space-between;
      align-items: center;
      border-radius: 2px;
    }

    .welcome-content h1 {
      font-size: 20px;
      font-weight: 500;
      margin-bottom: var(--space-xs);
      letter-spacing: -0.01em;
    }

    .welcome-content p {
      font-size: 12px;
      color: var(--text-secondary);
      line-height: 1.5;
    }

    .stats-row {
      display: flex;
      gap: var(--space-2xl);
    }

    .stat {
      text-align: center;
    }

    .stat-num {
      font-size: 32px;
      font-weight: 300;
      line-height: 1;
      margin-bottom: var(--space-xs);
      letter-spacing: -0.02em;
    }

    .stat-label {
      font-size: 8px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: var(--text-muted);
    }

    /* Toolbar */
    .toolbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: var(--space-lg);
      flex-wrap: wrap;
      gap: var(--space-md);
    }

    .toolbar-title {
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.2em;
      text-transform: uppercase;
    }

    .filters {
      display: flex;
      gap: 3px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 8px 14px;
      font-size: 9px;
      font-weight: 500;
      letter-spacing: 0.08em;
      text-transform: uppercase;
      background: transparent;
      border: 1px solid var(--border);
      color: var(--text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .filter-btn:hover {
      border-color: var(--text-muted);
      color: var(--text-secondary);
    }

    .filter-btn.active {
      background: var(--text-primary);
      border-color: var(--text-primary);
      color: var(--bg-secondary);
    }

    /* Kanban */
    .kanban {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--space-md);
      margin-bottom: var(--space-xl);
    }

    .column {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      min-height: 400px;
      border-radius: 2px;
    }

    .column-head {
      padding: var(--space-md);
      border-bottom: 1px solid var(--border);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .column-title {
      font-size: 9px;
      font-weight: 600;
      letter-spacing: 0.18em;
      text-transform: uppercase;
    }

    .column-count {
      font-size: 10px;
      color: var(--text-muted);
      font-weight: 500;
    }

    .column-body {
      padding: var(--space-sm);
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: var(--space-sm);
      min-height: 80px;
      transition: background var(--transition-fast);
    }

    .column-body.drag-over {
      background: var(--bg-hover);
    }

    .card {
      background: var(--bg-primary);
      border: 1px solid var(--border);
      padding: var(--space-sm) var(--space-md);
      cursor: grab;
      transition: all var(--transition-fast);
      position: relative;
      border-radius: 2px;
    }

    .card:hover {
      border-color: var(--text-faint);
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .card:active { cursor: grabbing; }
    .card.dragging { opacity: 0.4; }
    .card.drop-above { 
      border-top: 2px solid var(--accent-lavender); 
      margin-top: -2px; 
    }

    .card-title {
      font-size: 12px;
      font-weight: 500;
      line-height: 1.5;
      margin-bottom: var(--space-sm);
      outline: none;
    }

    .card-title:focus {
      background: var(--bg-hover);
      padding: 2px 4px;
      margin: -2px -4px;
      border-radius: 2px;
    }

    .card-meta {
      display: flex;
      align-items: center;
      gap: var(--space-sm);
      flex-wrap: wrap;
    }

    .tag {
      font-size: 8px;
      font-weight: 600;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      padding: 3px 8px;
      border-radius: 2px;
      cursor: pointer;
      transition: opacity var(--transition-fast);
    }

    .tag:hover { opacity: 0.8; }

    .tag-content { background: #EDE4F0; color: #7B5A8C; }
    .tag-business { background: #F5E8D8; color: #8B7355; }
    .tag-health { background: #E0F0E3; color: #4A7C59; }
    .tag-legal { background: #E0EBF5; color: #4A6B8C; }
    .tag-personal { background: #F5E4E8; color: #8C5A6B; }
    .tag-empire { background: #F5F0E0; color: #7B7340; }
    .tag-meesh { background: #E0F5F5; color: #4A7B7B; }

    [data-theme="dark"] .tag-content { background: rgba(123, 90, 140, 0.2); color: #C9A8D9; }
    [data-theme="dark"] .tag-business { background: rgba(139, 115, 85, 0.2); color: #D9C4A8; }
    [data-theme="dark"] .tag-health { background: rgba(74, 124, 89, 0.2); color: #A8D9B5; }
    [data-theme="dark"] .tag-legal { background: rgba(74, 107, 140, 0.2); color: #A8C4D9; }
    [data-theme="dark"] .tag-personal { background: rgba(140, 90, 107, 0.2); color: #D9A8B8; }
    [data-theme="dark"] .tag-empire { background: rgba(123, 115, 64, 0.2); color: #D9D4A8; }
    [data-theme="dark"] .tag-meesh { background: rgba(74, 123, 123, 0.2); color: #A8D9D9; }

    .priority {
      font-size: 8px;
      letter-spacing: 0.05em;
      color: var(--text-muted);
      text-transform: uppercase;
      cursor: pointer;
    }

    .priority.high { color: #D97B7B; }

    .due-badge {
      font-size: 8px;
      color: #D97B7B;
      font-weight: 500;
    }

    .date-badge {
      font-size: 9px;
      color: var(--text-muted);
    }

    .card-delete {
      position: absolute;
      top: 6px;
      right: 6px;
      background: var(--bg-hover);
      border: none;
      border-radius: 4px;
      padding: 3px 7px;
      cursor: pointer;
      font-size: 10px;
      color: #E57373;
      opacity: 0;
      transition: opacity var(--transition-fast);
    }

    .card:hover .card-delete { opacity: 1; }

    .add-btn {
      margin: var(--space-sm);
      padding: var(--space-sm);
      font-size: 9px;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      background: transparent;
      border: 1px dashed var(--border);
      color: var(--text-muted);
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .add-btn:hover {
      border-color: var(--text-muted);
      color: var(--text-secondary);
    }

    /* Suggestions */
    .suggestions {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      padding: var(--space-lg);
      border-radius: 2px;
    }

    .suggestions-head {
      margin-bottom: var(--space-md);
      padding-bottom: var(--space-sm);
      border-bottom: 1px solid var(--border-light);
    }

    .suggestions-title {
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      margin-bottom: 2px;
    }

    .suggestions-sub {
      font-size: 11px;
      color: var(--text-muted);
    }

    .suggestions-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: var(--space-md);
    }

    .suggestion {
      background: var(--bg-primary);
      border: 1px solid var(--border);
      padding: var(--space-md);
      cursor: pointer;
      transition: all var(--transition-fast);
      border-radius: 2px;
    }

    .suggestion:hover {
      border-color: var(--accent-lavender);
      transform: translateY(-2px);
      box-shadow: var(--shadow-sm);
    }

    .suggestion-icon {
      font-size: 18px;
      margin-bottom: var(--space-sm);
    }

    .suggestion-text {
      font-size: 11px;
      line-height: 1.5;
      margin-bottom: var(--space-sm);
    }

    .suggestion-why {
      font-size: 10px;
      color: var(--text-muted);
      font-style: italic;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       RIGHT SIDEBAR
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .sidebar-right {
      background: var(--bg-secondary);
      border-left: 1px solid var(--border);
      padding: var(--space-xl) var(--space-lg);
      display: flex;
      flex-direction: column;
      gap: var(--space-lg);
      overflow-y: auto;
    }

    .panel {
      border: 1px solid var(--border);
      background: var(--bg-primary);
      border-radius: 2px;
      overflow: hidden;
    }

    .panel-head {
      padding: var(--space-sm) var(--space-md);
      border-bottom: 1px solid var(--border);
      font-size: 9px;
      font-weight: 600;
      letter-spacing: 0.15em;
      text-transform: uppercase;
    }

    .panel-body {
      padding: var(--space-md);
    }

    /* Valentine's */
    .vday-panel {
      background: linear-gradient(145deg, #FFF0F3, #FFE8ED);
      border: 1px solid #FFCCD5;
      text-align: center;
      padding: var(--space-lg);
      border-radius: 2px;
    }

    [data-theme="dark"] .vday-panel {
      background: linear-gradient(145deg, rgba(216, 27, 96, 0.15), rgba(216, 27, 96, 0.1));
      border-color: rgba(216, 27, 96, 0.3);
    }

    .vday-emoji {
      font-size: 28px;
      margin-bottom: var(--space-sm);
    }

    .vday-num {
      font-size: 42px;
      font-weight: 300;
      color: #D81B60;
      line-height: 1;
      margin-bottom: var(--space-xs);
    }

    .vday-label {
      font-size: 8px;
      letter-spacing: 0.15em;
      text-transform: uppercase;
      color: #E91E63;
    }

    /* Fitness */
    .fitness-row {
      display: flex;
      justify-content: space-between;
      padding: var(--space-sm) 0;
      border-bottom: 1px solid var(--border-light);
      font-size: 11px;
    }

    .fitness-row:last-child {
      border-bottom: none;
    }

    .fitness-label {
      color: var(--text-secondary);
    }

    .fitness-value {
      font-weight: 500;
    }

    /* Notes */
    .notes-input {
      width: 100%;
      min-height: 100px;
      padding: var(--space-sm);
      border: 1px solid var(--border);
      background: var(--bg-secondary);
      font-family: inherit;
      font-size: 11px;
      color: var(--text-primary);
      resize: vertical;
      border-radius: 2px;
      line-height: 1.6;
    }

    .notes-input:focus {
      outline: none;
      border-color: var(--text-muted);
    }

    .notes-input::placeholder {
      color: var(--text-faint);
    }

    /* Frankie Tasks in sidebar */
    .frankie-task-item {
      padding: var(--space-xs) 0;
      border-bottom: 1px solid var(--border-light);
      font-size: 11px;
      color: var(--text-secondary);
    }

    .frankie-task-item:last-child {
      border-bottom: none;
    }

    .frankie-task-active {
      color: var(--accent-lavender);
    }

    .frankie-task-done {
      color: var(--text-muted);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TASK MODAL
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.4);
      z-index: 1000;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      pointer-events: none;
      transition: opacity var(--transition-medium);
      backdrop-filter: blur(4px);
    }

    .modal-overlay.active {
      opacity: 1;
      pointer-events: auto;
    }

    .modal {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      padding: var(--space-xl);
      width: 100%;
      max-width: 420px;
      box-shadow: var(--shadow-lg);
      transform: translateY(20px);
      transition: transform var(--transition-medium);
    }

    .modal-overlay.active .modal {
      transform: translateY(0);
    }

    .modal-title {
      font-size: 12px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      margin-bottom: var(--space-lg);
    }

    .modal-field {
      margin-bottom: var(--space-md);
    }

    .modal-label {
      font-size: 9px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      color: var(--text-muted);
      margin-bottom: var(--space-xs);
      display: block;
    }

    .modal-input {
      width: 100%;
      padding: 12px 14px;
      font-size: 13px;
      font-family: inherit;
      border: 1px solid var(--border);
      background: var(--bg-primary);
      color: var(--text-primary);
      transition: border-color var(--transition-fast);
    }

    .modal-input:focus {
      outline: none;
      border-color: var(--text-muted);
    }

    .modal-select {
      width: 100%;
      padding: 12px 14px;
      font-size: 13px;
      font-family: inherit;
      border: 1px solid var(--border);
      background: var(--bg-primary);
      color: var(--text-primary);
      cursor: pointer;
    }

    .modal-actions {
      display: flex;
      gap: var(--space-sm);
      margin-top: var(--space-lg);
    }

    .modal-btn {
      flex: 1;
      padding: 12px;
      font-size: 10px;
      font-weight: 600;
      letter-spacing: 0.1em;
      text-transform: uppercase;
      border: none;
      cursor: pointer;
      transition: all var(--transition-fast);
    }

    .modal-btn-primary {
      background: var(--text-primary);
      color: var(--bg-secondary);
    }

    .modal-btn-primary:hover {
      opacity: 0.9;
    }

    .modal-btn-secondary {
      background: var(--bg-primary);
      border: 1px solid var(--border);
      color: var(--text-secondary);
    }

    .modal-btn-secondary:hover {
      border-color: var(--text-muted);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       TOAST
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .toast {
      position: fixed;
      bottom: 24px;
      left: 50%;
      transform: translateX(-50%) translateY(20px);
      background: var(--text-primary);
      color: var(--bg-secondary);
      padding: 12px 24px;
      font-size: 11px;
      letter-spacing: 0.05em;
      opacity: 0;
      transition: all var(--transition-medium);
      z-index: 1000;
      border-radius: 2px;
      box-shadow: var(--shadow-lg);
    }

    .toast.show {
      opacity: 1;
      transform: translateX(-50%) translateY(0);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       KEYBOARD SHORTCUTS HINT
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .shortcuts-hint {
      position: fixed;
      bottom: var(--space-lg);
      right: var(--space-lg);
      font-size: 9px;
      color: var(--text-faint);
      letter-spacing: 0.05em;
    }

    .shortcuts-hint kbd {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      padding: 2px 6px;
      border-radius: 3px;
      font-family: inherit;
      margin-left: 4px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       SCROLLBAR
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    ::-webkit-scrollbar { width: 5px; height: 5px; }
    ::-webkit-scrollbar-track { background: transparent; }
    ::-webkit-scrollbar-thumb { 
      background: var(--border); 
      border-radius: 3px; 
    }
    ::-webkit-scrollbar-thumb:hover {
      background: var(--text-faint);
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MOBILE STYLES
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    @media (max-width: 1200px) {
      .layout { grid-template-columns: 220px 1fr; }
      .sidebar-right { display: none; }
      .suggestions-grid { grid-template-columns: repeat(2, 1fr); }
      .kanban { grid-template-columns: repeat(2, 1fr); }
    }

    /* Mobile Header with Avatar */
    .mobile-header {
      display: none;
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      padding: var(--space-md);
      align-items: center;
      gap: var(--space-md);
    }

    .mobile-header .avatar {
      width: 48px;
      height: 48px;
      border-radius: 50%;
      object-fit: cover;
      object-position: center 15%;
      border: 2px solid var(--border);
    }

    .mobile-header-info {
      flex: 1;
    }

    .mobile-header-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .mobile-header-status {
      font-size: 11px;
      color: var(--status-online);
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .mobile-header-status::before {
      content: '';
      width: 6px;
      height: 6px;
      background: var(--status-online);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    .mobile-calendar {
      display: none;
      background: var(--bg-secondary);
      border-radius: 12px;
      padding: var(--space-md);
      margin: var(--space-md);
      margin-top: 0;
      border: 1px solid var(--border);
    }

    .mobile-calendar-title {
      font-size: 12px;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: var(--space-sm);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    @media (max-width: 900px) {
      .layout { grid-template-columns: 1fr; }
      .sidebar-left { display: none; }
      .sidebar-right { display: none; }
      .header-nav { display: none; }
      .mobile-header { display: flex; }
      .mobile-calendar { display: block; }
      .main { padding: var(--space-md); }
      .welcome { flex-direction: column; gap: var(--space-md); text-align: center; }
      .stats-row { justify-content: center; }
      .kanban { grid-template-columns: 1fr 1fr; gap: var(--space-sm); }
      .column { min-height: 300px; }
      .suggestions-grid { grid-template-columns: 1fr 1fr; }
      .shortcuts-hint { display: none; }
    }

    @media (max-width: 600px) {
      html { font-size: 13px; }
      .header { padding: 0 var(--space-md); }
      .kanban { grid-template-columns: 1fr; }
      .column { min-height: 250px; }
      .suggestions-grid { grid-template-columns: 1fr; }
      .filters { gap: 2px; }
      .filter-btn { padding: 6px 10px; font-size: 8px; }
      .stat-num { font-size: 24px; }
      .welcome-content h1 { font-size: 16px; }
      .toast { 
        bottom: 80px; 
        left: var(--space-md);
        right: var(--space-md);
        transform: translateY(20px);
        text-align: center;
      }
      .toast.show {
        transform: translateY(0);
      }
    }

    /* Mobile bottom nav */
    .mobile-nav {
      display: none;
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--bg-secondary);
      border-top: 1px solid var(--border);
      padding: var(--space-sm) var(--space-md);
      z-index: 100;
    }

    .mobile-nav-items {
      display: flex;
      justify-content: space-around;
      align-items: center;
    }

    .mobile-nav-item {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 4px;
      text-decoration: none;
      color: var(--text-muted);
      font-size: 10px;
      padding: var(--space-xs);
      transition: color var(--transition-fast);
    }

    .mobile-nav-item.active,
    .mobile-nav-item:hover {
      color: var(--text-primary);
    }

    .mobile-nav-icon {
      font-size: 18px;
    }

    @media (max-width: 900px) {
      .mobile-nav { display: block; }
      body { padding-bottom: 70px; }
    }
  </style>
</head>
<body>
  <!-- Auth Overlay -->
  <div class="auth-overlay" id="authOverlay">
    <div class="auth-card">
      <div class="auth-logo">FRANKIE</div>
      <img src="assets/frankie-avatar.png" alt="Frankie" class="auth-avatar">
      <div class="auth-title">Welcome Back</div>
      <div class="auth-subtitle">Enter your access code to continue</div>
      <form id="authForm">
        <div class="auth-input-wrapper">
          <input type="password" class="auth-input" id="authInput" placeholder="â€¢ â€¢ â€¢ â€¢" maxlength="4" autocomplete="off" inputmode="numeric">
        </div>
        <button type="submit" class="auth-btn">Unlock Dashboard</button>
      </form>
      <div class="auth-error" id="authError"></div>
      <div class="auth-hint">Dee's special number ğŸ’œ</div>
    </div>
  </div>

  <!-- Mobile Header with Avatar -->
  <div class="mobile-header">
    <img src="assets/frankie-avatar.png" alt="Frankie" class="avatar">
    <div class="mobile-header-info">
      <div class="mobile-header-name">FRANKIE</div>
      <div class="mobile-header-status" id="mobileStatusText">Standing by ğŸ’œ</div>
    </div>
    <button class="theme-toggle" id="mobileThemeToggle" title="Toggle dark mode">ğŸŒ™</button>
  </div>

  <!-- Mobile Calendar -->
  <div class="mobile-calendar">
    <div class="mobile-calendar-title">ğŸ“… Today's Schedule</div>
    <div id="mobileCalendarEvents">Loading...</div>
  </div>

  <!-- Header -->
  <header class="header">
    <div class="logo">FRANKIE</div>
    <nav class="header-nav">
      <a href="#" class="nav-link active">Dashboard</a>
      <a href="#" class="nav-link">Notes</a>
      <a href="#" class="nav-link">Schedule</a>
      <a href="#" class="nav-link">Goals</a>
    </nav>
    <div class="header-actions">
      <button class="theme-toggle" id="themeToggle" title="Toggle dark mode">ğŸŒ™</button>
      <span class="sync-badge" id="syncTime">SYNCED â€”:â€”</span>
    </div>
  </header>

  <div class="layout">
    <!-- Left Sidebar -->
    <aside class="sidebar-left">
      <div class="agent-card">
        <div class="avatar-wrapper">
          <div class="avatar-ring"></div>
          <img src="assets/frankie-avatar.png" alt="Frankie" class="avatar">
          <div class="status-dot"></div>
        </div>
        <div class="agent-name">FRANKIE</div>
        <div class="agent-role">Dee's #1 Â· Chief of Staff</div>
        <div class="agent-status-live" id="liveStatus">
          <span class="status-dot-live"></span>
          <span id="statusText">Standing by ğŸ’œ</span>
        </div>
      </div>

      <div class="sidebar-section calendar-section">
        <div class="section-label collapsible-header" onclick="toggleCollapse('scheduleContent', this)">
          <span id="todayDate">Today â€” Feb 2</span>
          <span class="collapse-arrow">â–¼</span>
        </div>
        <div class="collapsible-content" id="scheduleContent">
          <div class="calendar-timeline" id="todayTimeline">
            <div class="calendar-loading">Loading calendar...</div>
          </div>
          <div class="calendar-upcoming-header" onclick="toggleCollapse('upcomingContent', this)">
            <span>Upcoming</span>
            <span class="collapse-arrow">â–¼</span>
          </div>
          <div class="collapsible-content" id="upcomingContent">
            <div class="calendar-upcoming" id="upcomingEvents"></div>
          </div>
          <div class="calendar-sync-info" id="calendarSyncInfo">
            <span class="sync-dot"></span>
            Last synced: â€”
          </div>
        </div>
      </div>

      <div class="sidebar-section">
        <div class="section-label collapsible-header" onclick="toggleCollapse('frankieTasksContent', this)">
          <span>ğŸ¤– Frankie's Tasks</span>
          <span class="collapse-arrow">â–¼</span>
        </div>
        <div class="collapsible-content" id="frankieTasksContent">
          <div id="frankieTasksList" style="font-size:11px;color:var(--text-secondary);">Loading...</div>
        </div>
      </div>

      <div class="sidebar-section">
        <div class="section-label collapsible-header" onclick="toggleCollapse('visionContent', this)">
          <span>The Vision 2027</span>
          <span class="collapse-arrow">â–¼</span>
        </div>
        <div class="collapsible-content" id="visionContent">
          <div class="goal-item">
            <div class="goal-header">
              <span>Patreon â†’ 6 figs/mo</span>
              <span class="goal-percent">15%</span>
            </div>
            <div class="goal-bar"><div class="goal-fill" style="width:15%"></div></div>
          </div>
          <div class="goal-item">
            <div class="goal-header">
              <span>Quit Telnyx</span>
              <span class="goal-percent">5%</span>
            </div>
            <div class="goal-bar"><div class="goal-fill" style="width:5%"></div></div>
          </div>
          <div class="goal-item">
            <div class="goal-header">
              <span>Goal Weight (130 lbs)</span>
              <span class="goal-percent">96%</span>
            </div>
            <div class="goal-bar"><div class="goal-fill" style="width:96%"></div></div>
          </div>
        </div>
      </div>

      <div class="sidebar-footer">
        Claude Opus 4.5 Â· OpenClaw<br>
        <span style="opacity:0.6">Press ? for shortcuts</span>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main">
      <div class="welcome">
        <div class="welcome-content">
          <h1 id="welcomeTitle">Good morning, Dee ğŸ’œ</h1>
          <p id="welcomeSubtitle">Track what Frankie's working on ğŸ¤–</p>
        </div>
        <div class="stats-row">
          <div class="stat">
            <div class="stat-num" id="statTodo">0</div>
            <div class="stat-label">Queued</div>
          </div>
          <div class="stat">
            <div class="stat-num" id="statProgress">0</div>
            <div class="stat-label">In Progress</div>
          </div>
          <div class="stat">
            <div class="stat-num" id="statDone">0</div>
            <div class="stat-label">Completed</div>
          </div>
        </div>
      </div>

      <div class="toolbar">
        <div class="toolbar-title">ğŸ¤– Frankie's Task Board</div>
        <div class="filters">
          <button class="filter-btn active" data-filter="all">All</button>
          <button class="filter-btn" data-filter="content">Content</button>
          <button class="filter-btn" data-filter="business">Business</button>
          <button class="filter-btn" data-filter="health">Health</button>
          <button class="filter-btn" data-filter="legal">Legal</button>
          <button class="filter-btn" data-filter="empire">Empire</button>
          <button class="filter-btn" data-filter="meesh">Meesh ğŸ’œ</button>
        </div>
      </div>

      <div class="kanban">
        <div class="column">
          <div class="column-head">
            <span class="column-title">To Do</span>
            <span class="column-count" id="countTodo">0</span>
          </div>
          <div class="column-body" id="colTodo" data-col="todo"></div>
          <button class="add-btn" onclick="openTaskModal('todo')">+ Add Task</button>
        </div>
        <div class="column">
          <div class="column-head">
            <span class="column-title">In Progress</span>
            <span class="column-count" id="countProgress">0</span>
          </div>
          <div class="column-body" id="colProgress" data-col="progress"></div>
          <button class="add-btn" onclick="openTaskModal('progress')">+ Add Task</button>
        </div>
        <div class="column">
          <div class="column-head">
            <span class="column-title">Done</span>
            <span class="column-count" id="countDone">0</span>
          </div>
          <div class="column-body" id="colDone" data-col="done"></div>
        </div>
        <div class="column">
          <div class="column-head">
            <span class="column-title">Archive</span>
            <span class="column-count" id="countArchive">0</span>
          </div>
          <div class="column-body" id="colArchive" data-col="archive"></div>
        </div>
      </div>

      <div class="suggestions">
        <div class="suggestions-head">
          <div class="suggestions-title">ğŸš€ Frankie's Suggestions</div>
          <div class="suggestions-sub">Reverse prompts based on your goals</div>
        </div>
        <div class="suggestions-grid">
          <div class="suggestion" onclick="addSuggestion(this)">
            <div class="suggestion-icon">ğŸ“±</div>
            <div class="suggestion-text">Schedule social media posts for the week</div>
            <div class="suggestion-why">Batch content = less daily stress</div>
          </div>
          <div class="suggestion" onclick="addSuggestion(this)">
            <div class="suggestion-icon">ğŸ“ˆ</div>
            <div class="suggestion-text">Review Patreon tier structure</div>
            <div class="suggestion-why">Optimize tiers = more MRR</div>
          </div>
          <div class="suggestion" onclick="addSuggestion(this)">
            <div class="suggestion-icon">ğŸ¬</div>
            <div class="suggestion-text">Batch YouTube descriptions</div>
            <div class="suggestion-why">Filming W-Sun â€” prep now</div>
          </div>
          <div class="suggestion" onclick="addSuggestion(this)">
            <div class="suggestion-icon">âš–ï¸</div>
            <div class="suggestion-text">Block 2hrs for Telnyx deep work</div>
            <div class="suggestion-why">Less context switching</div>
          </div>
        </div>
      </div>
    </main>

    <!-- Right Sidebar -->
    <aside class="sidebar-right">
      <div class="vday-panel">
        <div class="vday-emoji">ğŸ’œ</div>
        <div class="vday-num" id="vdayNum">12</div>
        <div class="vday-label">Days Until Valentine's</div>
      </div>

      <div class="panel">
        <div class="panel-head collapsible-header" onclick="toggleCollapse('fitnessContent', this)">
          <span>ğŸ’ª Fitness</span>
          <span class="collapse-arrow">â–¼</span>
        </div>
        <div class="panel-body collapsible-content" id="fitnessContent">
          <div class="fitness-row">
            <span class="fitness-label">Current</span>
            <span class="fitness-value">135.6 lbs</span>
          </div>
          <div class="fitness-row">
            <span class="fitness-label">Goal</span>
            <span class="fitness-value">130 lbs</span>
          </div>
          <div class="fitness-row">
            <span class="fitness-label">Steps Today</span>
            <span class="fitness-value">â€”</span>
          </div>
          <div class="fitness-row">
            <span class="fitness-label">Next Gym</span>
            <span class="fitness-value">Mon</span>
          </div>
        </div>
      </div>

      <div class="panel">
        <div class="panel-head collapsible-header" onclick="toggleCollapse('notesContent', this)">
          <span>ğŸ“ Quick Notes</span>
          <span class="collapse-arrow">â–¼</span>
        </div>
        <div class="panel-body collapsible-content" id="notesContent">
          <textarea class="notes-input" id="notes" placeholder="Brain dump here..."></textarea>
        </div>
      </div>
    </aside>
  </div>

  <!-- Mobile Navigation -->
  <nav class="mobile-nav">
    <div class="mobile-nav-items">
      <a href="#" class="mobile-nav-item active">
        <span class="mobile-nav-icon">ğŸ“‹</span>
        <span>Tasks</span>
      </a>
      <a href="#" class="mobile-nav-item">
        <span class="mobile-nav-icon">ğŸ“…</span>
        <span>Calendar</span>
      </a>
      <a href="#" class="mobile-nav-item" onclick="openTaskModal('todo'); return false;">
        <span class="mobile-nav-icon">â•</span>
        <span>Add</span>
      </a>
      <a href="#" class="mobile-nav-item">
        <span class="mobile-nav-icon">ğŸ¯</span>
        <span>Goals</span>
      </a>
      <a href="#" class="mobile-nav-item" onclick="document.getElementById('themeToggle').click(); return false;">
        <span class="mobile-nav-icon">âš™ï¸</span>
        <span>Settings</span>
      </a>
    </div>
  </nav>

  <!-- Task Modal -->
  <div class="modal-overlay" id="taskModal">
    <div class="modal">
      <div class="modal-title" id="modalTitle">Add New Task</div>
      <div class="modal-field">
        <label class="modal-label">Task Name</label>
        <input type="text" class="modal-input" id="taskInput" placeholder="What needs to be done?">
      </div>
      <div class="modal-field">
        <label class="modal-label">Category</label>
        <select class="modal-select" id="tagSelect">
          <option value="business">Business</option>
          <option value="content">Content</option>
          <option value="health">Health</option>
          <option value="legal">Legal</option>
          <option value="empire">Empire</option>
          <option value="meesh">Meesh ğŸ’œ</option>
          <option value="personal">Personal</option>
        </select>
      </div>
      <div class="modal-field">
        <label class="modal-label">Priority</label>
        <select class="modal-select" id="prioritySelect">
          <option value="medium">Medium</option>
          <option value="high">High</option>
          <option value="low">Low</option>
        </select>
      </div>
      <div class="modal-actions">
        <button class="modal-btn modal-btn-secondary" onclick="closeTaskModal()">Cancel</button>
        <button class="modal-btn modal-btn-primary" onclick="submitTask()">Add Task</button>
      </div>
    </div>
  </div>

  <div class="toast" id="toast"></div>

  <div class="shortcuts-hint">
    Press <kbd>?</kbd> for shortcuts
  </div>

  <script>
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // AUTH
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    const CORRECT_PASSWORD = '7913';
    const STORAGE_KEY = 'frankie_authenticated';

    function checkAuth() {
      if (sessionStorage.getItem(STORAGE_KEY) === 'true') {
        document.getElementById('authOverlay').classList.add('hidden');
        return true;
      }
      document.getElementById('authInput').focus();
      return false;
    }

    document.getElementById('authForm').addEventListener('submit', function(e) {
      e.preventDefault();
      const input = document.getElementById('authInput');
      const error = document.getElementById('authError');
      
      if (input.value === CORRECT_PASSWORD) {
        sessionStorage.setItem(STORAGE_KEY, 'true');
        document.getElementById('authOverlay').classList.add('hidden');
        toast('Welcome back, Dee ğŸ’œ');
      } else {
        input.classList.add('error');
        error.textContent = 'Incorrect code. Try again.';
        input.value = '';
        setTimeout(() => input.classList.remove('error'), 400);
      }
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // THEME
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function initTheme() {
      const saved = localStorage.getItem('frankieTheme');
      const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
      const theme = saved || (prefersDark ? 'dark' : 'light');
      setTheme(theme);
    }

    function setTheme(theme) {
      document.documentElement.setAttribute('data-theme', theme);
      localStorage.setItem('frankieTheme', theme);
      document.getElementById('themeToggle').textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
      const mobileThemeBtn = document.getElementById('mobileThemeToggle');
      if (mobileThemeBtn) mobileThemeBtn.textContent = theme === 'dark' ? 'â˜€ï¸' : 'ğŸŒ™';
      document.querySelector('meta[name="theme-color"]').content = theme === 'dark' ? '#141414' : '#F9F9F8';
    }

    document.getElementById('themeToggle').addEventListener('click', () => {
      const current = document.documentElement.getAttribute('data-theme');
      setTheme(current === 'dark' ? 'light' : 'dark');
    });

    // Mobile theme toggle
    const mobileTheme = document.getElementById('mobileThemeToggle');
    if (mobileTheme) {
      mobileTheme.addEventListener('click', () => {
        const current = document.documentElement.getAttribute('data-theme');
        setTheme(current === 'dark' ? 'light' : 'dark');
        mobileTheme.textContent = current === 'dark' ? 'ğŸŒ™' : 'â˜€ï¸';
      });
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // TASKS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let tasks = JSON.parse(localStorage.getItem('frankieTasks3')) || {
      todo: [
        { id: 1, title: "Build Subpoena Intake Bot", tag: "legal", priority: "medium" },
        { id: 2, title: "Build Deadline Tracker Bot", tag: "legal", priority: "medium" },
        { id: 3, title: "Gmail OAuth setup (needs Dee)", tag: "business", priority: "high" },
        { id: 4, title: "Email Triage Bot (after OAuth)", tag: "legal", priority: "medium" },
        { id: 5, title: "Daily Briefing Bot (after OAuth)", tag: "legal", priority: "medium" },
      ],
      progress: [],
      done: [
        { id: 6, title: "Built Meeting Prep Bot", tag: "legal", date: "Completed at 2:50 AM on 02/02/2026" },
        { id: 7, title: "Built Contract Review Bot (prompts + templates)", tag: "legal", date: "Completed at 2:45 AM on 02/02/2026" },
        { id: 8, title: "Created LEGAL-BOTS-READY-TO-BUILD.md", tag: "legal", date: "Completed at 2:35 AM on 02/02/2026" },
        { id: 9, title: "Set up ~/clawd/bots/ folder structure", tag: "empire", date: "Completed at 2:28 AM on 02/02/2026" },
        { id: 10, title: "Deployed dashboard to Vercel", tag: "empire", date: "Completed at 1:30 AM on 02/02/2026" },
        { id: 11, title: "Google Calendar integration", tag: "empire", date: "Completed at 1:15 AM on 02/02/2026" },
        { id: 12, title: "JS password protection", tag: "empire", date: "Completed at 12:45 AM on 02/02/2026" },
      ],
      archive: [
        { id: 13, title: "Migrate to OpenClaw", tag: "empire", date: "Feb 1" },
        { id: 14, title: "Create frankie.mdops@gmail.com", tag: "business", date: "Feb 1" },
        { id: 15, title: "Content Center mentionPatterns", tag: "content", date: "Feb 1" },
      ]
    };

    let nextId = 20, draggedEl = null, filter = 'all';
    let currentModalCol = 'todo';

    const colMap = { todo: 'colTodo', progress: 'colProgress', done: 'colDone', archive: 'colArchive' };

    function saveTasks() {
      localStorage.setItem('frankieTasks3', JSON.stringify(tasks));
    }

    function deleteTask(id) {
      if (!confirm('Delete this task?')) return;
      for (const col of Object.keys(tasks)) {
        const idx = tasks[col].findIndex(t => t.id === id);
        if (idx > -1) {
          tasks[col].splice(idx, 1);
          saveTasks();
          render();
          toast('Task deleted');
          return;
        }
      }
    }

    function render() {
      Object.keys(colMap).forEach(key => {
        const el = document.getElementById(colMap[key]);
        el.innerHTML = '';
        let list = tasks[key];
        if (filter !== 'all') list = list.filter(t => t.tag === filter);
        list.forEach(t => el.appendChild(makeCard(t)));
      });
      updateCounts();
      saveTasks();
    }

    function makeCard(t) {
      const card = document.createElement('div');
      card.className = 'card';
      card.draggable = true;
      card.dataset.id = t.id;

      const titleEl = document.createElement('div');
      titleEl.className = 'card-title';
      titleEl.textContent = t.title;
      titleEl.contentEditable = true;
      titleEl.addEventListener('focus', () => { card.draggable = false; });
      titleEl.addEventListener('blur', () => { 
        card.draggable = true;
        if (titleEl.textContent.trim() !== t.title) {
          t.title = titleEl.textContent.trim() || t.title;
          saveTasks();
          toast('Saved');
        }
      });
      titleEl.addEventListener('keydown', e => { 
        if (e.key === 'Enter') { e.preventDefault(); titleEl.blur(); } 
      });
      card.appendChild(titleEl);
      
      const metaEl = document.createElement('div');
      metaEl.className = 'card-meta';
      
      const tagEl = document.createElement('span');
      tagEl.className = `tag tag-${t.tag}`;
      tagEl.textContent = t.tag;
      tagEl.title = 'Click to change tag';
      const tags = ['content','business','health','legal','empire','meesh','personal'];
      tagEl.addEventListener('click', (e) => {
        e.stopPropagation();
        const idx = tags.indexOf(t.tag);
        t.tag = tags[(idx + 1) % tags.length];
        saveTasks();
        render();
        toast('Tag: ' + t.tag);
      });
      metaEl.appendChild(tagEl);
      
      if (t.priority && !t.date) {
        const prioEl = document.createElement('span');
        prioEl.className = `priority ${t.priority}`;
        prioEl.textContent = t.priority;
        prioEl.title = 'Click to change priority';
        const prios = ['low','medium','high'];
        prioEl.addEventListener('click', (e) => {
          e.stopPropagation();
          const idx = prios.indexOf(t.priority);
          t.priority = prios[(idx + 1) % prios.length];
          saveTasks();
          render();
          toast('Priority: ' + t.priority);
        });
        metaEl.appendChild(prioEl);
      }
      
      if (t.due) {
        const dueEl = document.createElement('span');
        dueEl.className = 'due-badge';
        dueEl.textContent = 'âš ï¸ ' + t.due;
        metaEl.appendChild(dueEl);
      }
      
      if (t.date) {
        const dateEl = document.createElement('span');
        dateEl.className = 'date-badge';
        dateEl.textContent = t.date;
        metaEl.appendChild(dateEl);
      }
      
      card.appendChild(metaEl);
      
      const delBtn = document.createElement('button');
      delBtn.textContent = 'âœ•';
      delBtn.className = 'card-delete';
      delBtn.title = 'Delete task';
      delBtn.addEventListener('click', (e) => { e.stopPropagation(); deleteTask(t.id); });
      card.appendChild(delBtn);
      
      card.addEventListener('dragstart', e => { 
        draggedEl = card; 
        card.classList.add('dragging'); 
      });
      card.addEventListener('dragend', () => { 
        card.classList.remove('dragging'); 
        draggedEl = null; 
        document.querySelectorAll('.column-body').forEach(c => c.classList.remove('drag-over')); 
      });
      
      return card;
    }

    function updateCounts() {
      ['todo','progress','done','archive'].forEach(k => {
        document.getElementById('count' + k.charAt(0).toUpperCase() + k.slice(1)).textContent = tasks[k].length;
      });
      document.getElementById('statTodo').textContent = tasks.todo.length;
      document.getElementById('statProgress').textContent = tasks.progress.length;
      document.getElementById('statDone').textContent = tasks.done.length;
    }

    // Drag and drop
    document.querySelectorAll('.column-body').forEach(zone => {
      zone.addEventListener('dragover', e => { 
        e.preventDefault(); 
        zone.classList.add('drag-over');
        const cards = [...zone.querySelectorAll('.card:not(.dragging)')];
        const afterCard = cards.find(card => {
          const rect = card.getBoundingClientRect();
          return e.clientY < rect.top + rect.height / 2;
        });
        cards.forEach(c => c.classList.remove('drop-above'));
        if (afterCard) afterCard.classList.add('drop-above');
      });
      zone.addEventListener('dragleave', () => {
        zone.classList.remove('drag-over');
        zone.querySelectorAll('.card').forEach(c => c.classList.remove('drop-above'));
      });
      zone.addEventListener('drop', e => {
        e.preventDefault();
        zone.classList.remove('drag-over');
        zone.querySelectorAll('.card').forEach(c => c.classList.remove('drop-above'));
        if (!draggedEl) return;
        const id = +draggedEl.dataset.id, newCol = zone.dataset.col;
        
        const cards = [...zone.querySelectorAll('.card:not(.dragging)')];
        const afterCard = cards.find(card => {
          const rect = card.getBoundingClientRect();
          return e.clientY < rect.top + rect.height / 2;
        });
        const dropIdx = afterCard ? tasks[newCol].findIndex(t => t.id === +afterCard.dataset.id) : tasks[newCol].length;
        
        let task, oldCol;
        for (const k of Object.keys(tasks)) {
          const i = tasks[k].findIndex(t => t.id === id);
          if (i > -1) { task = tasks[k].splice(i, 1)[0]; oldCol = k; break; }
        }
        if (task) {
          if (newCol === 'done' && !task.date) { 
            const now = new Date();
            const hours = now.getHours();
            const mins = now.getMinutes().toString().padStart(2, '0');
            const ampm = hours >= 12 ? 'PM' : 'AM';
            const h = hours % 12 || 12;
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            const year = now.getFullYear();
            task.date = `Completed at ${h}:${mins} ${ampm} on ${month}/${day}/${year}`; 
            delete task.due; 
            delete task.priority; 
          }
          const adjustedIdx = (oldCol === newCol && dropIdx > tasks[newCol].length) ? dropIdx - 1 : dropIdx;
          tasks[newCol].splice(Math.min(adjustedIdx, tasks[newCol].length), 0, task);
          saveTasks();
          render();
          toast('Task moved');
        }
      });
    });

    // Task Modal
    function openTaskModal(col) {
      currentModalCol = col;
      document.getElementById('taskModal').classList.add('active');
      document.getElementById('taskInput').value = '';
      document.getElementById('taskInput').focus();
    }

    function closeTaskModal() {
      document.getElementById('taskModal').classList.remove('active');
    }

    function submitTask() {
      const title = document.getElementById('taskInput').value.trim();
      if (!title) return;
      const tag = document.getElementById('tagSelect').value;
      const priority = document.getElementById('prioritySelect').value;
      tasks[currentModalCol].push({ id: nextId++, title, tag, priority });
      render();
      closeTaskModal();
      toast('Task added');
    }

    document.getElementById('taskModal').addEventListener('click', e => {
      if (e.target.id === 'taskModal') closeTaskModal();
    });

    document.getElementById('taskInput').addEventListener('keydown', e => {
      if (e.key === 'Enter') submitTask();
      if (e.key === 'Escape') closeTaskModal();
    });

    function addSuggestion(el) {
      const txt = el.querySelector('.suggestion-text').textContent;
      tasks.todo.unshift({ id: nextId++, title: txt, tag: 'empire', priority: 'medium' });
      render();
      toast('Added to To Do');
    }

    // Filters
    document.querySelectorAll('.filter-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        filter = btn.dataset.filter;
        render();
      });
    });

    // Notes
    const notesEl = document.getElementById('notes');
    notesEl.value = localStorage.getItem('frankieNotes2') || '';
    notesEl.addEventListener('input', () => localStorage.setItem('frankieNotes2', notesEl.value));

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // UTILITIES
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    function toast(msg) {
      const t = document.getElementById('toast');
      t.textContent = msg;
      t.classList.add('show');
      setTimeout(() => t.classList.remove('show'), 2000);
    }

    function sync() {
      const t = new Date().toLocaleTimeString('en-US',{hour:'numeric',minute:'2-digit',hour12:true}).toUpperCase();
      document.getElementById('syncTime').textContent = 'SYNCED ' + t;
    }

    function vday() {
      const d = Math.ceil((new Date('2026-02-14') - new Date()) / 864e5);
      document.getElementById('vdayNum').textContent = Math.max(0, d);
    }

    function updateTodayDate() {
      const today = new Date();
      const formatted = today.toLocaleDateString('en-US', { month: 'short', day: 'numeric' });
      document.getElementById('todayDate').textContent = 'Today â€” ' + formatted;
    }

    function updateWelcome() {
      const hour = new Date().getHours();
      const day = new Date().toLocaleDateString('en-US', { weekday: 'long' });
      let greeting, subtitle;
      
      if (hour < 5) {
        greeting = "Burning the midnight oil? ğŸŒ™";
        subtitle = "Remember to rest when you can.";
      } else if (hour < 12) {
        greeting = "Good morning, Dee ğŸ’œ";
        subtitle = `Happy ${day}. Let's make it count.`;
      } else if (hour < 17) {
        greeting = "Good afternoon, Dee â˜€ï¸";
        subtitle = `${day} afternoon grind. You got this.`;
      } else if (hour < 21) {
        greeting = "Good evening, Dee ğŸŒ…";
        subtitle = "Winding down? Or just getting started?";
      } else {
        greeting = "Night owl mode ğŸ¦‰";
        subtitle = "Late night productivity hits different.";
      }
      
      document.getElementById('welcomeTitle').textContent = greeting;
      document.getElementById('welcomeSubtitle').textContent = subtitle;
    }

    // Collapsible sections
    function toggleCollapse(contentId, headerEl) {
      const content = document.getElementById(contentId);
      const arrow = headerEl.querySelector('.collapse-arrow');
      content.classList.toggle('collapsed');
      arrow.classList.toggle('collapsed');
      
      const collapsed = JSON.parse(localStorage.getItem('frankieCollapsed') || '{}');
      collapsed[contentId] = content.classList.contains('collapsed');
      localStorage.setItem('frankieCollapsed', JSON.stringify(collapsed));
    }

    function restoreCollapseState() {
      const collapsed = JSON.parse(localStorage.getItem('frankieCollapsed') || '{}');
      Object.keys(collapsed).forEach(id => {
        if (collapsed[id]) {
          const content = document.getElementById(id);
          const header = content?.previousElementSibling;
          if (content && header) {
            content.classList.add('collapsed');
            header.querySelector('.collapse-arrow')?.classList.add('collapsed');
          }
        }
      });
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // KEYBOARD SHORTCUTS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    document.addEventListener('keydown', e => {
      // Don't trigger if user is typing
      if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.contentEditable === 'true') return;
      
      if (e.key === '?') {
        toast('Shortcuts: N=New Task, D=Dark Mode, R=Refresh, Esc=Close');
      } else if (e.key === 'n' || e.key === 'N') {
        openTaskModal('todo');
      } else if (e.key === 'd' || e.key === 'D') {
        document.getElementById('themeToggle').click();
      } else if (e.key === 'r' || e.key === 'R') {
        fetchCalendarData();
        updateFrankieStatus();
        updateFrankieTasks();
        toast('Refreshed');
      } else if (e.key === 'Escape') {
        closeTaskModal();
      }
    });

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // FRANKIE STATUS
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    async function updateFrankieTasks() {
      try {
        const res = await fetch('frankie-tasks.json?' + Date.now());
        if (res.ok) {
          const data = await res.json();
          const container = document.getElementById('frankieTasksList');
          let html = '';
          
          const active = data.current?.filter(t => t.status !== 'done') || [];
          const done = data.current?.filter(t => t.status === 'done') || [];
          
          if (active.length > 0) {
            html += '<div style="margin-bottom:8px;font-weight:500;color:var(--accent-lavender);">âš¡ Working on:</div>';
            active.forEach(t => {
              html += `<div class="frankie-task-item frankie-task-active">${t.title}</div>`;
            });
          }
          
          if (done.length > 0) {
            html += '<div style="margin:10px 0 6px;font-weight:500;color:var(--status-online);">âœ… Just Completed:</div>';
            done.forEach(t => {
              const time = t.completedAt ? ` <span style="color:var(--text-faint);font-size:9px;">(${t.completedAt})</span>` : '';
              html += `<div class="frankie-task-item frankie-task-done">${t.title}${time}</div>`;
            });
          }
          
          if (data.completed?.length > 0) {
            html += '<div style="margin:10px 0 4px;font-weight:500;color:var(--text-muted);">ğŸ“‹ Completed Tonight:</div>';
            data.completed.forEach(t => {
              const time = t.completedAt ? ` <span style="color:var(--text-faint);">@ ${t.completedAt}</span>` : '';
              html += `<div class="frankie-task-item" style="font-size:10px;color:var(--text-secondary);">âœ“ ${t.task}${time}</div>`;
            });
          }
          
          if (data.queue?.length > 0) {
            html += '<div style="margin:12px 0 4px;font-weight:500;color:var(--text-muted);">ğŸ“¥ Up Next:</div>';
            data.queue.slice(0, 3).forEach(t => {
              html += `<div class="frankie-task-item" style="font-size:10px;color:var(--text-faint);">â—‹ ${t}</div>`;
            });
            if (data.queue.length > 3) {
              html += `<div style="font-size:9px;color:var(--text-faint);margin-top:4px;">+${data.queue.length - 3} more in queue</div>`;
            }
          }
          
          container.innerHTML = html || '<div style="color:var(--text-muted);font-style:italic;">Standing by ğŸ’œ</div>';
        }
      } catch (e) { console.log('Tasks fetch error:', e); }
    }

    async function updateFrankieStatus() {
      try {
        const res = await fetch('frankie-status.json?' + Date.now());
        const data = await res.json();
        if (data.status) {
          document.getElementById('statusText').textContent = data.status;
          const mobileStatus = document.getElementById('mobileStatusText');
          if (mobileStatus) mobileStatus.textContent = data.status;
        }
      } catch (e) {}
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // GOOGLE CALENDAR
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    let calendarData = null;
    
    async function fetchCalendarData() {
      try {
        const res = await fetch('calendar-events.json?' + Date.now());
        if (!res.ok) throw new Error('Calendar data not found');
        calendarData = await res.json();
        renderCalendar();
        renderMobileCalendar();
        updateCalendarSyncInfo();
      } catch (e) {
        console.warn('Calendar fetch failed:', e);
        document.getElementById('todayTimeline').innerHTML = 
          '<div class="cal-empty">Calendar unavailable</div>';
      }
    }
    
    function formatEventTime(event) {
      if (event.start.date) {
        return { time: 'ALL DAY', isAllDay: true };
      }
      const dt = new Date(event.start.dateTime);
      const hours = dt.getHours();
      const mins = dt.getMinutes();
      const ampm = hours >= 12 ? 'p' : 'a';
      const h = hours % 12 || 12;
      const m = mins > 0 ? ':' + mins.toString().padStart(2, '0') : '';
      return { time: h + m + ampm, isAllDay: false };
    }
    
    function getEventDate(event) {
      if (event.start.date) {
        return new Date(event.start.date + 'T00:00:00');
      }
      return new Date(event.start.dateTime);
    }
    
    function isSameDay(d1, d2) {
      return d1.getFullYear() === d2.getFullYear() &&
             d1.getMonth() === d2.getMonth() &&
             d1.getDate() === d2.getDate();
    }
    
    function createEventEl(event, calendarId) {
      const { time, isAllDay } = formatEventTime(event);
      const calClass = 'cal-' + calendarId.replace(/-/g, '-');
      
      const el = document.createElement('a');
      el.className = `cal-event ${calClass} ${isAllDay ? 'all-day' : ''}`;
      el.href = event.htmlLink || '#';
      el.target = '_blank';
      el.rel = 'noopener';
      if (event.colorId) el.dataset.color = event.colorId;
      
      const timeEl = document.createElement('span');
      timeEl.className = `cal-event-time ${isAllDay ? 'all-day' : ''}`;
      timeEl.textContent = time;
      el.appendChild(timeEl);
      
      const contentEl = document.createElement('div');
      contentEl.className = 'cal-event-content';
      
      const titleEl = document.createElement('div');
      titleEl.className = 'cal-event-title';
      titleEl.textContent = event.summary || '(No title)';
      titleEl.title = event.summary || '';
      contentEl.appendChild(titleEl);
      
      if (event.location) {
        const locEl = document.createElement('div');
        locEl.className = 'cal-event-location';
        locEl.textContent = 'ğŸ“ ' + event.location.split(',')[0];
        contentEl.appendChild(locEl);
      }
      
      el.appendChild(contentEl);
      return el;
    }
    
    function renderCalendar() {
      if (!calendarData || !calendarData.calendars) return;
      
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      const tomorrow = new Date(today);
      tomorrow.setDate(tomorrow.getDate() + 1);
      
      const allEvents = [];
      calendarData.calendars.forEach(cal => {
        (cal.events || []).forEach(event => {
          if (event.status !== 'cancelled') {
            allEvents.push({ ...event, calendarId: cal.id, calendarName: cal.name });
          }
        });
      });
      
      allEvents.sort((a, b) => getEventDate(a) - getEventDate(b));
      
      const todayEvents = allEvents.filter(e => isSameDay(getEventDate(e), today));
      const todayTimeline = document.getElementById('todayTimeline');
      todayTimeline.innerHTML = '';
      
      if (todayEvents.length === 0) {
        todayTimeline.innerHTML = '<div class="cal-empty">No events today âœ¨</div>';
      } else {
        const allDayEvents = todayEvents.filter(e => e.start.date);
        const timedEvents = todayEvents.filter(e => e.start.dateTime);
        [...allDayEvents, ...timedEvents].forEach(event => {
          todayTimeline.appendChild(createEventEl(event, event.calendarId));
        });
      }
      
      const upcomingEl = document.getElementById('upcomingEvents');
      upcomingEl.innerHTML = '';
      
      const upcomingEvents = allEvents.filter(e => {
        const eventDate = getEventDate(e);
        return eventDate > today && !isSameDay(eventDate, today);
      });
      
      if (upcomingEvents.length === 0) {
        upcomingEl.innerHTML = '<div class="cal-empty">No upcoming events</div>';
        return;
      }
      
      const maxDate = new Date(today);
      maxDate.setDate(maxDate.getDate() + 7);
      
      const dayGroups = {};
      upcomingEvents.forEach(event => {
        const eventDate = getEventDate(event);
        if (eventDate > maxDate) return;
        const dayKey = eventDate.toISOString().split('T')[0];
        if (!dayGroups[dayKey]) dayGroups[dayKey] = [];
        dayGroups[dayKey].push(event);
      });
      
      Object.keys(dayGroups).sort().slice(0, 5).forEach(dayKey => {
        const events = dayGroups[dayKey];
        const date = new Date(dayKey + 'T12:00:00');
        
        const groupEl = document.createElement('div');
        groupEl.className = 'cal-day-group';
        
        const headerEl = document.createElement('div');
        headerEl.className = 'cal-day-header';
        if (isSameDay(date, tomorrow)) {
          headerEl.classList.add('is-tomorrow');
          headerEl.textContent = 'Tomorrow';
        } else {
          headerEl.textContent = date.toLocaleDateString('en-US', { 
            weekday: 'short', month: 'short', day: 'numeric' 
          });
        }
        groupEl.appendChild(headerEl);
        
        events.slice(0, 4).forEach(event => {
          groupEl.appendChild(createEventEl(event, event.calendarId));
        });
        
        if (events.length > 4) {
          const moreEl = document.createElement('div');
          moreEl.className = 'cal-empty';
          moreEl.textContent = `+${events.length - 4} more`;
          groupEl.appendChild(moreEl);
        }
        
        upcomingEl.appendChild(groupEl);
      });
    }
    
    function renderMobileCalendar() {
      if (!calendarData || !calendarData.calendars) return;
      
      const today = new Date();
      today.setHours(0, 0, 0, 0);
      
      const allEvents = [];
      calendarData.calendars.forEach(cal => {
        (cal.events || []).forEach(event => {
          if (event.status !== 'cancelled') {
            allEvents.push({ ...event, calendarId: cal.id });
          }
        });
      });
      
      const todayEvents = allEvents.filter(e => {
        const eventDate = e.start.date ? new Date(e.start.date + 'T00:00:00') : new Date(e.start.dateTime);
        return eventDate.getFullYear() === today.getFullYear() &&
               eventDate.getMonth() === today.getMonth() &&
               eventDate.getDate() === today.getDate();
      });
      
      const mobileCalEl = document.getElementById('mobileCalendarEvents');
      if (!mobileCalEl) return;
      
      if (todayEvents.length === 0) {
        mobileCalEl.innerHTML = '<div style="color:var(--text-muted);font-size:12px;">No events today âœ¨</div>';
        return;
      }
      
      let html = '';
      todayEvents.forEach(event => {
        const isAllDay = !!event.start.date;
        let timeStr = 'ALL DAY';
        if (!isAllDay) {
          const dt = new Date(event.start.dateTime);
          const h = dt.getHours() % 12 || 12;
          const m = dt.getMinutes();
          const ampm = dt.getHours() >= 12 ? 'pm' : 'am';
          timeStr = h + (m > 0 ? ':' + m.toString().padStart(2,'0') : '') + ampm;
        }
        const color = event.calendarId === 'md-personal' ? '#92e1c0' : '#9fc6e7';
        html += `<div style="display:flex;align-items:center;gap:8px;padding:6px 0;border-bottom:1px solid var(--border-light);">
          <span style="width:4px;height:24px;background:${color};border-radius:2px;"></span>
          <span style="font-size:10px;color:var(--text-muted);min-width:50px;">${timeStr}</span>
          <span style="font-size:12px;color:var(--text-primary);flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;">${event.summary || '(No title)'}</span>
        </div>`;
      });
      mobileCalEl.innerHTML = html;
    }

    function updateCalendarSyncInfo() {
      if (!calendarData || !calendarData.lastUpdated) return;
      const syncEl = document.getElementById('calendarSyncInfo');
      const lastUpdated = new Date(calendarData.lastUpdated);
      const timeStr = lastUpdated.toLocaleTimeString('en-US', { 
        hour: 'numeric', minute: '2-digit', hour12: true 
      });
      syncEl.innerHTML = `<span class="sync-dot"></span>Synced ${timeStr}`;
    }

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // INIT
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    initTheme();
    checkAuth();
    render(); 
    sync(); 
    vday(); 
    updateTodayDate(); 
    updateWelcome();
    restoreCollapseState(); 
    updateFrankieStatus(); 
    updateFrankieTasks(); 
    fetchCalendarData();
    
    setInterval(sync, 30000);
    setInterval(updateFrankieStatus, 10000);
    setInterval(updateFrankieTasks, 30000);
    setInterval(fetchCalendarData, 300000);
    setInterval(updateWelcome, 60000);
  </script>
</body>
</html>
